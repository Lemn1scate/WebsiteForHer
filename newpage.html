<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Second Page</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Leckerli+One&display=swap" rel="stylesheet">
    <style>
        body {
            position: relative;
            width: 100vw;
            height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            font-family: 'Pacifico', cursive;
            color: black;
            overflow: hidden;
            text-align: center;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('bg-rose.jpg') center/cover no-repeat;
            opacity: 0.4;
            z-index: -1;
        }

        .text-container {
            font-size: 50px;
            margin-bottom: 20px;
        }

        .button {
            background-color: #ffb6c1;
            border: 2px solid gray;
            height: 100px;
            width: 200px;
            padding: 10px 20px;
            font-size: 30px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Leckerli One', cursive;
            transition: background-color 0.3s ease;
        }

        .button:hover {
            background-color: #ff69b4;
        }

        /* General Panel Styles */
        .panel {
            position: fixed;
            width: 75%;
            height: 75%;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.5s ease-in-out;
            border: 5px solid black;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .panel-title {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .choices-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px; /* Increased gap for better spacing */
        }
        
        .choice-button {
            background-color: #ffb6c1;
            border: 4px solid gray; /* Increased border thickness */
            padding: 45px; /* Tripled the padding */
            font-size: 48px; /* Tripled the font size */
            border-radius: 40px; /* Increased border radius for smoother edges */
            cursor: pointer;
            font-family: 'Leckerli One', cursive;
            transition: background-color 0.3s ease;
            width: 450px; /* Tripled the width */
        }
        
        .choice-button:hover {
            background-color: #ff69b4;
        }        

        .close-button {
            background-color: #ffb6c1;
            border: 2px solid gray;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Leckerli One', cursive;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }

        .close-button:hover {
            background-color: #ff69b4;
        }

        /* Panel Positions */
        .panel.bottom { bottom: -100%; left: 50%; transform: translateX(-50%); }
        .panel.left { left: -100%; top: 50%; transform: translateY(-50%); }
        .panel.top { top: -100%; left: 50%; transform: translateX(-50%); }
        .panel.right { right: -100%; top: 50%; transform: translateY(-50%); }
        .panel.center { top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); }

        /* Panel Active State */
        .panel.active.bottom { bottom: 12.5%; }
        .panel.active.left { left: 12.5%; }
        .panel.active.top { top: 12.5%; }
        .panel.active.right { right: 12.5%; }
        .panel.active.center { transform: translate(-50%, -50%) scale(1); }

        /* Background Colors */
        .panel.light-red { background: lightcoral; }
        .panel.light-green { background: lightgreen; }
        .panel.light-blue { background: lightblue; }
        .panel.light-yellow { background: lightyellow; }
        .panel.rose-pink { background: #ff66b2; }
    </style>
</head>
<body>
    <div class="text-container">
        <p>I want to make sure that you are Zela...</p>
        <p>If you're Zela, you can answer these questions...</p>
        <p>If you're not... well just don't open it...</p>
    </div>
    <button class="button" onclick="showPanel('questionPanel')">OKAY</button>

    <!-- First Panel -->
    <div class="panel bottom light-red" id="questionPanel">
        <div class="panel-title">What is the shape of the stone in the ring?</div>
        <div class="choices-container">
            <button class="choice-button" onclick="wrongChoice()">Diamond</button>
            <button class="choice-button" onclick="correctChoice('secondPanel')">Heart</button>
            <button class="choice-button" onclick="wrongChoice()">Round</button>
            <button class="choice-button" onclick="wrongChoice()">Cube</button>
        </div>
        <button class="close-button" onclick="closePanel('questionPanel')">Close</button>
    </div>

    <!-- Second Panel -->
    <div class="panel left light-green" id="secondPanel">
        <div class="panel-title">How many flowers do you have in bouquet?</div>
        <div class="choices-container">
            <button class="choice-button" onclick="wrongChoice()">sqt(9)</button>
            <button class="choice-button" onclick="wrongChoice()">2^2</button>
            <button class="choice-button" onclick="correctChoice('thirdPanel')">5 * 1</button>
            <button class="choice-button" onclick="wrongChoice()">21 / 2</button>
        </div>
        <button class="close-button" onclick="closePanel('secondPanel')">Close</button>
    </div>

    <!-- Third Panel -->
    <div class="panel top light-blue" id="thirdPanel">
        <div class="panel-title">In Waterfall Page, how many pictures?</div>
        <div class="choices-container">
            <button class="choice-button" onclick="correctChoice('fourthPanel')">3^3 -3</button>
            <button class="choice-button" onclick="wrongChoice()">7 * 1</button>
            <button class="choice-button" onclick="wrongChoice()">9+2-3</button>
            <button class="choice-button" onclick="wrongChoice()">3+3+3</button>
        </div>
        <button class="close-button" onclick="closePanel('thirdPanel')">Close</button>
    </div>

    <!-- Fourth Panel -->
    <div class="panel right light-yellow" id="fourthPanel">
        <div class="panel-title">You know this... Where is it?</div>
        <div class="choices-container">
            <button class="choice-button" onclick="correctChoice('finalPanel')">Angie's House</button>
            <button class="choice-button" onclick="wrongChoice()">Makoy's House</button>
            <button class="choice-button" onclick="wrongChoice()">Zela's House</button>
            <button class="choice-button" onclick="wrongChoice()">Janport's House</button>
        </div>
        <button class="close-button" onclick="closePanel('fourthPanel')">Close</button>
    </div>

    <!-- Fifth (Final) Panel -->
    <div class="panel center rose-pink" id="finalPanel">
        <div class="panel-title">Looks like you're really Zela... ðŸŽ‰
            <p>Then Zela, let's proceed to the main event...</p>
        </div>
        
        <!-- Proceed Button -->
        <button class="button" onclick="proceed()">Proceed</button>

        <!-- Close Button -->
        <button class="close-button" onclick="closePanel('finalPanel')">Close</button>
    </div>
    <audio id="bgMusic" autoplay loop muted>
        <source src="newpage_bg.mp3" type="audio/mpeg">
    </audio>

    <script>
        function showPanel(panelId) {
            let panel = document.getElementById(panelId);
            panel.classList.add("active");
        
            let choicesContainer = panel.querySelector(".choices-container");
            if (choicesContainer) {
                let buttons = Array.from(choicesContainer.children);
                shuffleArray(buttons);
                choicesContainer.innerHTML = "";
                buttons.forEach(button => choicesContainer.appendChild(button));
            }
        }
        
        function closePanel(panelId) {
            document.getElementById(panelId).classList.remove("active");
        }
        
        // Function to shuffle an array (Fisher-Yates Shuffle Algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }        

        function correctChoice(nextPanel) {
            closePanel(event.target.closest(".panel").id);
            setTimeout(() => showPanel(nextPanel), 500);
        }

        function wrongChoice() {
            closePanel(event.target.closest(".panel").id);
            setTimeout(() => alert("Oppss... Looks like you're not Zela..."), 500);
        }
        function proceed() {
            window.location.href = "mainpage.html"; // Redirects to the new page
        }
        document.addEventListener("DOMContentLoaded", function() {
            let bgMusic = document.getElementById("bgMusic");
    
            // Try playing automatically
            let playPromise = bgMusic.play();
            if (playPromise !== undefined) {
                playPromise.catch(() => {
                    console.warn("Autoplay blocked. Will unmute on interaction.");
                });
            }
    
            // Unmute when the user interacts
            document.body.addEventListener("click", function() {
                bgMusic.muted = false;
                bgMusic.play();
            });
        });
    </script>
</body>
</html>
